<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Manager Payment Level v1.1</title>
    <!--
        Product Manager Payment Level
        Version: 1.1
        Created: November 2025
        Author: Zaira Zatarain
        LinkedIn: https://www.linkedin.com/in/zaira-zatarain/es/
    -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .progress-tracker {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 2px solid #e9ecef;
        }

        .progress-bar-container {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .instructions {
            background: #f8f9fa;
            padding: 30px 40px;
            border-bottom: 2px solid #e9ecef;
        }

        .instructions h2 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .instructions ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .content {
            padding: 40px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .category-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .category-header h2 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .category-header p {
            opacity: 0.9;
            font-size: 0.95em;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.05em;
            color: #2d3748;
        }

        .question-type {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .options {
            margin-top: 15px;
        }

        .option {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option input[type="radio"] {
            margin-right: 12px;
            margin-top: 3px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .option label {
            cursor: pointer;
            flex: 1;
        }

        .scenario {
            background: #e8eaf6;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-style: italic;
            border-left: 4px solid #764ba2;
        }

        .button-container {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e9ecef;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            margin: 0 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn:disabled:hover {
            background: #ccc;
            transform: none;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0px);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .section-results {
            display: none;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .section-results.show {
            display: block;
        }

        .results-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
        }

        .score-display {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .answer-review {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .answer-item {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 6px;
            border-left: 4px solid #e9ecef;
        }

        .answer-item.correct {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .answer-item.incorrect {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .answer-item h4 {
            margin-bottom: 10px;
            color: #2d3748;
        }

        .your-answer {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .correct-answer {
            color: #28a745;
            font-weight: 600;
        }

        .explanation {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.5);
            border-radius: 4px;
            font-size: 0.95em;
        }

        .learning-path {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .learning-path h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .learning-path ul {
            margin-left: 20px;
        }

        .learning-path li {
            margin-bottom: 10px;
            color: #856404;
        }

        .final-summary {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .final-summary.show {
            display: block;
        }

        .category-score-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1.1em;
        }

        .section-menu-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .section-menu-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .section-menu-item.completed {
            border-left-color: #28a745;
            background: #f0f9f4;
        }

        .section-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .section-status.completed {
            background: #28a745;
            color: white;
        }

        .section-status.pending {
            background: #6c757d;
            color: white;
        }

        .question-display {
            background: #e8eaf6;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            font-weight: 500;
            color: #2d3748;
        }

        .answer-display {
            background: rgba(255,255,255,0.7);
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .answer-display.correct-choice {
            background: #d4edda;
            border: 2px solid #28a745;
        }

        .answer-display.incorrect-choice {
            background: #f8d7da;
            border: 2px solid #dc3545;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 40px;
            text-align: center;
            border-top: 2px solid #e9ecef;
            font-size: 0.95em;
            color: #666;
        }

        .footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .stats-counter {
            background: #f8f9fa;
            padding: 15px 40px;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-around;
            font-size: 0.9em;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .final-cta {
            background: #f0f4ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .final-cta h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .final-cta a {
            color: #667eea;
            font-weight: 600;
            text-decoration: none;
        }

        .final-cta a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }

            .header, .instructions, .content {
                padding: 20px;
            }

            .btn {
                padding: 12px 30px;
                font-size: 1em;
                margin: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Payments Product Manager Skills Assessment</h1>
            <p>Sección por sección con feedback inmediato</p>
            <p style="font-size: 0.85em; opacity: 0.8; margin-top: 5px;">Version 1.1</p>
        </div>

        <div class="progress-tracker">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <strong>Avance:</strong>
                <span id="progressText">0 de 7 secciones completadas</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progressBar" style="width: 0%">0%</div>
            </div>
        </div>

        <div class="instructions" id="instructions">
            <h2>¿Cómo funciona?</h2>
            <ul>
                <li><strong>Escoje tu camino:</strong> Comienza con cualquier sección o complételas en orden</li>
                <li><strong>Navegación flexible:</strong> Salta entre secciones en cualquier momento</li>
                <li><strong>Feedback inmediato:</strong> Obtén detalle inmediato sobre que respuesta era la correcta</li>
                <li><strong>Aprendizaje personalizado:</strong> Recibe recomendaciones personalizadas</li>
                <li><strong>Tiempo:</strong> ~5-7 minutos por sección (35-50 minutos en total)</li>
            </ul>
            <div class="button-container">
                <button class="btn" onclick="showSectionMenu()">Empezar</button>
            </div>
        </div>

        <div class="instructions" id="sectionMenu" style="display: none;">
            <h2>Escoge una sección</h2>
            <p style="margin-bottom: 20px;">Escoge cualquier sección para empezar. Puedes completarlo en cualquier orden.</p>
            <div id="sectionMenuList"></div>
        </div>

        <div class="content" id="content" style="display: none;">
            <!-- SECTION 1: Fundamentos -->
            <div class="section active" id="section1">
                <div class="category-header">
                    <h2>Sección 1: Fundamentos</h2>
                    <p>Entendiendo como funciona el ecosistema de pagos a alto nivel</p>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 2pts</span>
                    <div class="question-text">1. ¿Cuál es la diferencia entre un issuer y un acquirer?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q1" value="0" id="q1a">
                            <label for="q1a">A) Ambos procesan pagos a nivel general</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="2" id="q1b">
                            <label for="q1b">B) El issuer emite la tarjeta y el acquirer procesa pagos para el comercio</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="0" id="q1c">
                            <label for="q1c">C) El issuer hace settlements y el acquirer le muestra al cliente la pasarela de pago</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="0" id="q1d">
                            <label for="q1d">D) No hay diferencia</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 2pts</span>
                    <div class="question-text">2. ¿Qué elemento del ecosistema es el responsable final de autorizar o rechazar una transacción?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q2" value="0" id="q2a">
                            <label for="q2a">A) El adquirente</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="0" id="q2b">
                            <label for="q2b">B) La red de tarjetas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="2" id="q2c">
                            <label for="q2c">C) El emisor</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="0" id="q2d">
                            <label for="q2d">D) La pasarela de pagos</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 2pts</span>
                    <div class="question-text">3. ¿Cuál es la función principal de un payment gateway en un flujo online?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q3" value="0" id="q3a">
                            <label for="q3a">A) Autorizar el pago</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="2" id="q3b">
                            <label for="q3b">B) Cifrar, recibir y enviar los datos al procesador/acquirer</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="0" id="q3c">
                            <label for="q3c">C) Emitir tarjetas al usuario</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="0" id="q3d">
                            <label for="q3d">D) Generar tokens de red</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 2pts</span>
                    <div class="question-text">4. ¿Qué método de pago suele tener menor fricción y mayor aprobación por sus características de autentiación desde el dispositivo?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q4" value="0" id="q4a">
                            <label for="q4a">Tarjeta ingresada manualmente</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="0" id="q4b">
                            <label for="q4b">B) Tarjeta guardada sin token</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="2" id="q4c">
                            <label for="q4c">C) Wallet digital (Apple Pay / Google Pay)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="0" id="q4d">
                            <label for="q4d">D) Transferencia bancaria</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 3pts</span>
                    <div class="scenario">Estás revisando el funnel de pagos de un e-commerce y notas lo siguiente: 100% de los usuarios llegan al checkout, 72% ingresa correctamente los datos de tarjeta, 55% llega al paso de confirmación, 41% obtiene un resultado (aprobado o rechazado), 29% termina con una transacción aprobada.</div>
                    <div class="question-text">5. Como PM, ¿cuál sería tu hipótesis principal sobre dónde está ocurriendo el mayor problema y por qué?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q5" value="0" id="q5a">
                            <label for="q5a">A) El problema está en que los usuarios no desean comprar y abandonan el sitio.</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="0" id="q5b">
                            <label for="q5b">B) El problema está en el gateway, ya que muy pocos usuarios llegan a ingresar tarjeta</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="3" id="q5c">
                            <label for="q5c">C) El problema está entre la confirmación y la autorización, probablemente con el adquirente o el emisor.</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="0" id="q5d">
                            <label for="q5d">D) No hay problema; este funnel es normal y no debe investigarse</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 2pts</span>
                    <div class="question-text">6. ¿Cuál es una característica crítica de los pagos recurrentes/suscripciones?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q6" value="2" id="q6a">
                            <label for="q6a">A) Necesitan tokenizar la tarjeta y manejar estados de retry</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="0" id="q6b">
                            <label for="q6b">B) Siempre requieren que el usuario ingrese su tarjeta cada mes</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="0" id="q6c">
                            <label for="q6c">C) No pueden fallar jamás</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="0" id="q6d">
                            <label for="q6d">D) No involucran al emisor</label>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="showSectionMenu()">← Elige otro tema</button>
                    <button class="btn" onclick="submitSection(1)">Evaluar esta sección</button>
                </div>
            </div>

            <!-- Section Results Template -->
            <div class="section-results" id="results1"></div>

            <!-- SECTION 2: Habilidades -->
            <div class="section" id="section2">
                <div class="category-header">
                    <h2>Tema 2: Habilidades</h2>
                    <p>Preguntas sobre habilidades que desarrollas con experiencia</p>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 3pts</span>
                    <div class="scenario">Un developer te dice: “El problema es el timeout del issuer”.</div>
                    <div class="question-text">7. ¿Qué debes responder como PM?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q7" value="0" id="q7a">
                            <label for="q7a">A) Ok, lo arreglamos después.</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="0" id="q7b">
                            <label for="q7b">B) ¿Qué es un timeout?</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="3" id="q7c">
                            <label for="q7c">C) ¿El timeout viene antes o después de que el adquirente envía la solicitud? ¿Qué logs lo confirman?</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="0" id="q7d">
                            <label for="q7d">D) Cambiemos de adquirente ya.</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Opción múltiple - 2pts</span>
                    <div class="question-text">8. Un stakeholder del área comercial pide agregar 10 métodos de pago nuevos. ¿Qué haces?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q8" value="0" id="q8a">
                            <label for="q8a">A) Decir que sí porque revisas que hace sentido</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="0" id="q8b">
                            <label for="q8b">B) Explicar limitantes técnicas sin contexto</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="2" id="q8c">
                            <label for="q8c">C) Explicar impacto en conversión, costos y complejidad, proponiendo un análisis basado en datos</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="0" id="q8d">
                            <label for="q8d">D) Enviarlo con ingeniería</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 2pts</span>
                    <div class="question-text">9. Tu proveedor PSP asegura que “el problema no es de ellos”. ¿Cómo respondes profesionalmente?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q9" value="0" id="q9a">
                            <label for="q9a">A) Escalar a tu CEO</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="0" id="q9b">
                            <label for="q9b">B) Aceptarlo y cerrar el ticket</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="0" id="q9c">
                            <label for="q9c">C) Escribirles molesto pero con fundamentos</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="2" id="q9d">
                            <label for="q9d">D) Solicitar evidencia: logs, timestamps, decline codes y path de red</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 3pts</span>
                    <div class="scenario">En un QBR, el adquirente presume 95% de aprobación. Tu data dice 85%</div>
                    <div class="question-text">10. ¿Qué haces?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q10" value="0" id="q10a">
                            <label for="q10a">A) Aceptar su número.</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="0" id="q10b">
                            <label for="q10b">B) No decir nada.</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="3" id="q10c">
                            <label for="q10c">C) Preguntar qué cohortes usan, cómo calculan auth rate, fechas, BINs y método</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="0" id="q10d">
                            <label for="q10d">D) Cuestionar al PSP</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Verdadero/Falso- 1pt</span>
                    <div class="question-text">11. Un PM fuerte adapta su lenguaje según el stakeholder: técnico para devs, business para finanzas, simple para comercios.</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q11" value="1" id="q11a">
                            <label for="q11a">Verdadero</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q11" value="0" id="q11b">
                            <label for="q11b">Falso</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elige una opción - 2pts</span>
                    <div class="question-text">12. Un stakeholder reclama que “el checkout está lento”. ¿Cuál es la mejor primera acción?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q12" value="0" id="q12a">
                            <label for="q12a">A) Decirle que es su internet</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q12" value="0" id="q12b">
                            <label for="q12b">B) Ignorarlo, con tus revisiones tienes todo en control</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q12" value="2" id="q12c">
                            <label for="q12c">C) Revisas la latencia en logs, medir TTFB y performance del gateway</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q12" value="0" id="q12d">
                            <label for="q12d">D) Revisas o buscas rediseñar el checkout completo</label>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="showSectionMenu()">← Elegir tema siguiente</button>
                    <button class="btn" onclick="submitSection(2)">Evaluar esta sección</button>
                </div>
            </div>

            <div class="section-results" id="results2"></div>

            <!-- SECTION 3: Riesgo, fraude y compliance -->
            <div class="section" id="section3">
                <div class="category-header">
                    <h2>Tema 3: Riesgo, fraude y compliance</h2>
                    <p>Veamos como estás en conocimientos de las áreas más importantes relacioandas con pagos</p>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">13. Ves un aumento abrupto en transacciones pequeñas y repetidas del mismo BIN. ¿Qué podría ser?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q13" value="2" id="q13a">
                            <label for="q13a">A) Un ataque de card testing</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q13" value="0" id="q13b">
                            <label for="q13b">B) Un bug del gateway</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q13" value="0" id="q13c">
                            <label for="q13c">C) Un incremento sano en ventas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q13" value="0" id="q13d">
                            <label for="q13d">D) Problemas de settlement</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">14. ¿Cuál es la mejor forma de reducir friendly fraud (fraude amistoso)?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q14" value="0" id="q14a">
                            <label for="q14a">A) Forzar 3DS en todo</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" value="2" id="q14b">
                            <label for="q14b">B) Mejorar el descriptor bancario y las notificaciones previas al cobro</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" value="0" id="q14c">
                            <label for="q14c">C) Pedir más datos al cliente</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" value="0" id="q14d">
                            <label for="q14d">D) Desactivar pagos recurrentes</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">15. ¿Qué documento debes pedir para validar que un proveedor cumple PCI-DSS?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q15" value="0" id="q15a">
                            <label for="q15a">A) Un correo diciendo “somos PCI" firmado por el CEO</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" value="0" id="q15b">
                            <label for="q15b">B) Su presentación de ventas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" value="2" id="q15c">
                            <label for="q15c">C) Su AOC (Attestation of Compliance)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" value="0" id="q15d">
                            <label for="q15d">D) Su logotipo de PCI en la web</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 3pts</span>
                    <div class="scenario">Un país aplica SCA (Strong Customer Authentication).</div>
                    <div class="question-text">16. ¿Qué implica para tu PM role?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q16" value="0" id="q16a">
                            <label for="q16a">A) Puedes ignorar las reglas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" value="3" id="q16b">
                            <label for="q16b">B) Debes diseñar flows con autenticación fuerte (OTP, app, biometría)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" value="0" id="q16c">
                            <label for="q16c">C) Reduces seguridad para mejorar conversión</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" value="0" id="q16d">
                            <label for="q16d">D) Solo aplica a transferencias</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">17. ¿Cuál de los siguientes es un soft decline típico?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q17" value="0" id="q17a">
                            <label for="q17a">A) Tarjeta robada</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q17" value="2" id="q17b">
                            <label for="q17b">B) Fondos insuficientes temporales</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q17" value="0" id="q17c">
                            <label for="q17c">C) Número de tarjeta inválido</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q17" value="0" id="q17d">
                            <label for="q17d">D) Cuenta cerrada</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Verdadero/Falso - 1pt</span>
                    <div class="question-text">18. PCI-DSS solo aplica si guardas números reales de tarjeta (PAN).</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q18" value="0" id="q18a">
                            <label for="q18a">Verdadero</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q18" value="1" id="q18b">
                            <label for="q18b">Falso</label>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="showSectionMenu()">← Elegir tema siguiente</button>
                    <button class="btn" onclick="submitSection(3)">Evaluar este tema</button>
                </div>
            </div>

            <div class="section-results" id="results3"></div>

            <!-- SECTION 4: Experiencia -->
            <div class="section" id="section4">
                <div class="category-header">
                    <h2>Tea 4: Experiencia</h2>
                    <p>Evaluemos como estás con la experiencia en pagos</p>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 3pts</span>
                    <div class="scenario">Un marketplace quiere habilitar pagos entre compradores y vendedores sin tocar los fondos.</div>
                    <div class="question-text">19. ¿Qué caso de uso aplica?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q19" value="0" id="q19a">
                            <label for="q19a">A) Adquirencia directa</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q19" value="3" id="q19b">
                            <label for="q19b">B) Split payments con cuentas de terceros (payouts)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q19" value="0" id="q19c">
                            <label for="q19c">C) Wallet sin KYC</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q19" value="0" id="q19d">
                            <label for="q19d">D) Pago contra entrega</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 2pts</span>
                    <div class="scenario">Una app de delivery tiene alto abandono cuando pide CVV cada vez</div>
                    <div class="question-text">20. ¿Qué caso de uso resuelve esto?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q20" value="2" id="q20a">
                            <label for="q20a">A) Tokenización + one-click payment</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q20" value="0" id="q20b">
                            <label for="q20b">B) SPEI o Transferencias bancarias</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q20" value="0" id="q20c">
                            <label for="q20c">C) 3DS obligatorio</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q20" value="0" id="q20d">
                            <label for="q20d">D) Cash-on-delivery</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Verdadero/Falso - 1pt</span>
                    <div class="question-text">21. Los pagos QR estáticos siempre requieren conciliación manual.</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q21" value="1" id="q21a">
                            <label for="q21a">Verdadero</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q21" value="0" id="q21b">
                            <label for="q21b">Falso</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 2pts</span>
                    <div class="scenario">Una fintech quiere permitir que usuarios agreguen saldo en Oxxo, tiendas y corresponsales.</div>
                    <div class="question-text">22. ¿Qué caso de uso es?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q22" value="0" id="q22a">
                            <label for="q22a">A) Transferencias internacionales</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" value="2" id="q22b">
                            <label for="q22b">B) Cash-in</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" value="0" id="q22c">
                            <label for="q22c">C) Cash-out</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" value="0" id="q22d">
                            <label for="q22d">D) Chargebacks</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Scenario - 3pts</span>
                    <div class="scenario">Una app de viajes quiere cobrar automáticamente 48 horas antes de la salida del vuelo.</div>
                    <div class="question-text">23. ¿Qué caso de uso aplica?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q23" value="0" id="q23a">
                            <label for="q23a">A) Autorización diferida</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" value="3" id="q23b">
                            <label for="q23b">B) Captura automática y programada</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" value="0" id="q23c">
                            <label for="q23c">C) Pagos presenciales</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" value="0" id="q23d">
                            <label for="q23d">D) Pago offline</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 2pts</span>
                    <div class="scenario">Usuarios de un e-commerce abandonan cuando el checkout redirige a otra página.</div>
                    <div class="question-text">24. ¿Qué caso de uso mejora esto?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q24" value="2" id="q24a">
                            <label for="q24a">A) Checkout nativo integrado</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q24" value="0" id="q24b">
                            <label for="q24b">B) Checkout offline</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q24" value="0" id="q24c">
                            <label for="q24c">C) Captura manual</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q24" value="0" id="q24d">
                            <label for="q24d">D) Pagar con un asesor</label>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="showSectionMenu()">← Elegir tema siguiente</button>
                    <button class="btn" onclick="submitSection(4)">Evaluar este tema</button>
                </div>
            </div>

            <div class="section-results" id="results4"></div>

            <!-- SECTION 5: Desarrollo de producto -->
            <div class="section" id="section5">
                <div class="category-header">
                    <h2>Tema 5: Desarollo de Producto</h2>
                    <p>Manejo efectivo del ciclo de producto</p>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">25. Estás definiendo un nuevo flujo de onboarding para comercios. ¿Qué entregable es imprescindible para ingeniería?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q25" value="0" id="q25a">
                            <label for="q25a">A) Un pitch de 3 líneas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q25" value="0" id="q25b">
                            <label for="q25b">B) Un roadmap general</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q25" value="2" id="q25c">
                            <label for="q25c">C) Un PRD con flujos, criterios de aceptación y edge cases</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q25" value="0" id="q25d">
                            <label for="q25d">D) Un mockup con contexto</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 3pts</span>
                    <div class="scenario">Tu equipo quiere añadir campos extra en el formulario para “más seguridad”</div>
                    <div class="question-text">26. ¿Cuál es tu siguiente paso?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q26" value="0" id="q26a">
                            <label for="q26a">A) Aceptarlo, ya que debes confiar en tu equipo</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q26" value="0" id="q26b">
                            <label for="q26b">B) Decir que es imposible, porque no se ve viable</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q26" value="3" id="q26c">
                            <label for="q26c">C) Evaluar impacto en conversión y proponer autenticación más inteligente (3DS dinámico, biometría)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q26" value="0" id="q26d">
                            <label for="q26d">D) Añadirlos ya que es importante para el roadmap</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Verdadero/Falso- 1pt</span>
                    <div class="question-text">27. UX en pagos es más importante que diseño visual.</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q27" value="1" id="q27a">
                            <label for="q27a">Verdadero</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q27" value="0" id="q27b">
                            <label for="q27b">Falso</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">28. Ingeniería quiere lanzar una versión interna primero. ¿Qué metodología estás aplicando?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q28" value="0" id="q28a">
                            <label for="q28a">A) Big bang release</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q28" value="0" id="q28b">
                            <label for="q28b">B) Dead-end design</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q28" value="2" id="q28c">
                            <label for="q28c">C) Feature flags / progressive rollout</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q28" value="0" id="q28d">
                            <label for="q28d">D) Waterfall flexible</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">29. Necesitas lanzar un BNPL rápido para competir. ¿Cuál es el enfoque correcto?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q29" value="0" id="q29a">
                            <label for="q29a">A) Integrar al proveedor de menor costo para hacer un MVP de bajo costo</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q29" value="0" id="q29b">
                            <label for="q29b">B) Hacer una integración nativa desde cero</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q29" value="2" id="q29c">
                            <label for="q29c">C) Elegir un proveedor con la API más simple para un MVP</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q29" value="0" id="q29d">
                            <label for="q29d">D) No lanzar nada hasta tener un sistema perfecto</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Scenario - 3pts</span>
                    <div class="scenario">Estás rediseñando un checkout"</div>
                    <div class="question-text">30. ¿Cuál es la prioridad principal?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q30" value="0" id="q30a">
                            <label for="q30a">A) Hacerlo visualmente atractivo para el usuario y enfocarte en la UX/UI</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q30" value="3" id="q30b">
                            <label for="q30b">B) Reducir el número de pasos y fricción</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q30" value="0" id="q30c">
                            <label for="q30c">C) Incluir animaciones modernas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q30" value="0" id="q30d">
                            <label for="q30d">D) Enfocarte en los pasos desde el diseño</label>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="showSectionMenu()">← Elegir tema siguiente</button>
                    <button class="btn" onclick="submitSection(5)">Evaluar este tema</button>
                </div>
            </div>

            <div class="section-results" id="results5"></div>

            <!-- SECTION 6: Unit economics -->
            <div class="section" id="section6">
                <div class="category-header">
                    <h2>Tema 6: Unit Economics</h2>
                    <p>Entendimiento financiero del ecosistema de pagos</p>
                </div>

                <div class="question">
                    <span class="question-type">Escenario - 3pts</span>
                    <div class="scenario">Un comercio procesa pagos con un MDR del 2.9% + $0.30 USD</div>
                    <div class="question-text">31. ¿Qué afecta más la rentabilidad en tickets pequeños?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q31" value="0" id="q31a">
                            <label for="q31a">A) El porcentaje de las ventas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q31" value="0" id="q31b">
                            <label for="q31b">B) El tráfico web</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q31" value="3" id="q31c">
                            <label for="q31c">C) La tarifa fija por transacción</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q31" value="0" id="q31d">
                            <label for="q31d">D) El diseño visual del checkout</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elegir una opción - 2pts</span>
                    <div class="question-text">32. ¿Qué pasa con los unit economics cuando sube la tasa de contracargos?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q32" value="0" id="q32a">
                            <label for="q32a">A) Nada importante</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q32" value="0" id="q32b">
                            <label for="q32b">B) Mejoran los ingresos con las devoluciones</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q32" value="2" id="q32c">
                            <label for="q32c">C) Disminuye la contribución porque cada chargeback implica costos adicionales</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q32" value="0" id="q32d">
                            <label for="q32d">D) Solo afecta a soporte, no hay afectación económica</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 2pts</span>
                    <div class="question-text">33. Un PSP tiene un MDR más alto, pero también duplica el auth rate. ¿Qué pasa con tus unit economics?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q33" value="0" id="q33a">
                            <label for="q33a">A) Peoran automáticamente</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q33" value="2" id="q33b">
                            <label for="q33b">B) Mejoran porque aumentas conversiones e ingresos totales</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q33" value="0" id="q33c">
                            <label for="q33c">C) No cambia nada</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q33" value="0" id="q33d">
                            <label for="q33d">D) Empeoran porque el porcentaje es mayor</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Verdadero/Falso - 1pt</span>
                    <div class="question-text">34. Los métodos alternativos como wallets o transferencias suelen mejorar los unit economics</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q34" value="1" id="q34a">
                            <label for="q34a">Verdadero</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q34" value="0" id="q34b">
                            <label for="q34b">Falso</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elije una opción - 3pts</span>
                    <div class="question-text">35. ¿Por qué un marketplace debe considerar costos de payouts en sus unit economics?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q35" value="0" id="q35a">
                            <label for="q35a">A) Porque todos los payouts son gratis</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q35" value="3" id="q35b">
                            <label for="q35b">B) Porque los payouts tienen costos fijos o por volumen que impactan márgenes</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q35" value="0" id="q35c">
                            <label for="q35c">C) Porque afectan el diseño</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q35" value="0" id="q35d">
                            <label for="q35d">D) Porque requieren 3DS</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Elija una opción - 2pts</span>
                    <div class="question-text">36. ¿Qué impacto tiene una alta tasa de soft declines en tus unit economics?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q36" value="0" id="q36a">
                            <label for="q36a">A) Ninguno</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q36" value="2" id="q36b">
                            <label for="q36b">B) Incrementa costos por reintentos y pérdida de ventas que sí eran legítimas</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q36" value="0" id="q36c">
                            <label for="q36c">C) Reduce fraude automáticamente</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q36" value="0" id="q36d">
                            <label for="q36d">D) Mejora conversión</label>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="showSectionMenu()">← Elegir tema siguiente</button>
                    <button class="btn" onclick="submitSection(6)">Evaluar este tema</button>
                </div>
            </div>

            <div class="section-results" id="results6"></div>

            <!-- SECTION 7: Domain-Specific (Learning & Education) -->
            <div class="section" id="section7">
                <div class="category-header">
                    <h2>Section 7: AI in Learning & Education</h2>
                    <p>Applying AI to learning, education, and workforce development</p>
                </div>

                <div class="question">
                    <span class="question-type">Scenario - 3pts</span>
                    <div class="scenario">AI tutor tells student "2+2=5" when asked for help with basic math.</div>
                    <div class="question-text">37. Why is this MORE serious than same error in general chatbot?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q37" value="0" id="q37a">
                            <label for="q37a">A) Not more serious—errors are equally problematic everywhere</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q37" value="3" id="q37b">
                            <label for="q37b">B) Educational errors create misconceptions that interfere with future learning</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q37" value="0" id="q37c">
                            <label for="q37c">C) Parents will complain more vocally</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q37" value="0" id="q37d">
                            <label for="q37d">D) It's obviously wrong so students will ignore it</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Multiple Choice - 2pts</span>
                    <div class="question-text">38. What distinguishes adaptive learning from content recommendations (like Netflix)?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q38" value="2" id="q38a">
                            <label for="q38a">A) Must consider learning science—spacing, scaffolding, zone of proximal development</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q38" value="0" id="q38b">
                            <label for="q38b">B) They're fundamentally identical recommendation problems</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q38" value="0" id="q38c">
                            <label for="q38c">C) Adaptive learning is technically simpler to implement</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q38" value="0" id="q38d">
                            <label for="q38d">D) Adaptive learning doesn't use AI</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">True/False - 1pt</span>
                    <div class="question-text">39. AI-generated practice problems are always superior to human-created ones because AI produces infinite variations.</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q39" value="0" id="q39a">
                            <label for="q39a">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q39" value="1" id="q39b">
                            <label for="q39b">False</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Multiple Choice - 2pts</span>
                    <div class="question-text">40. Using AI to predict student dropout risk—what's the PRIMARY ethical concern?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q40" value="0" id="q40a">
                            <label for="q40a">A) Predictions may not be 100% accurate</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q40" value="2" id="q40b">
                            <label for="q40b">B) Predictions can become self-fulfilling or bias teacher treatment</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q40" value="0" id="q40c">
                            <label for="q40c">C) Parents might object to data collection</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q40" value="0" id="q40d">
                            <label for="q40d">D) Feature is expensive to maintain</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Scenario - 3pts</span>
                    <div class="scenario">AI writing assistant helps students draft essays. Teachers say students are "cheating."</div>
                    <div class="question-text">41. What's the MOST constructive product response?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q41" value="0" id="q41a">
                            <label for="q41a">A) Remove feature to avoid controversy</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q41" value="3" id="q41b">
                            <label for="q41b">B) Redesign to support writing process (brainstorming, revision) not final drafts</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q41" value="0" id="q41c">
                            <label for="q41c">C) Add AI detection so teachers can identify AI usage</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q41" value="0" id="q41d">
                            <label for="q41d">D) Argue this is the future and teachers must adapt</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Multiple Choice - 2pts</span>
                    <div class="question-text">42. In learning analytics, what's a "knowledge gap"?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q42" value="2" id="q42a">
                            <label for="q42a">A) Difference between what learner knows and needs to know to progress</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q42" value="0" id="q42b">
                            <label for="q42b">B) Missing data in analytics systems</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q42" value="0" id="q42c">
                            <label for="q42c">C) Topics not yet covered in curriculum</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q42" value="0" id="q42d">
                            <label for="q42d">D) Time between learning sessions</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">True/False - 1pt</span>
                    <div class="question-text">43. In workforce development, AI skills assessments should only measure technical knowledge, not practical application.</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q43" value="0" id="q43a">
                            <label for="q43a">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q43" value="1" id="q43b">
                            <label for="q43b">False</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Multiple Choice - 2pts</span>
                    <div class="question-text">44. Building AI to curate learning content—what's TOP priority for quality control?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q44" value="0" id="q44a">
                            <label for="q44a">A) Content is engaging and entertaining</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q44" value="2" id="q44b">
                            <label for="q44b">B) Content is pedagogically sound, accurate, appropriately scaffolded</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q44" value="0" id="q44c">
                            <label for="q44c">C) Content loads quickly</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q44" value="0" id="q44d">
                            <label for="q44d">D) Content comes from popular sources</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <span class="question-type">Scenario - 3pts</span>
                    <div class="scenario">AI predicts learner will master skill in 2 weeks. Learner sees this prediction.</div>
                    <div class="question-text">45. What's your PRIMARY concern?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q45" value="0" id="q45a">
                            <label for="q45a">A) Prediction accuracy may be off by days</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q45" value="3" id="q45b">
                            <label for="q45b">B) Predictions affect learner motivation and agency—may give up or coast</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q45" value="0" id="q45c">
                            <label for="q45c">C) Privacy concerns about showing personalized data</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q45" value="0" id="q45d">
                            <label for="q45d">D) UI design for displaying predictions needs iteration</label>
                        </div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-secondary" onclick="showSectionMenu()">← Elegir tema siguiente</button>
                    <button class="btn" onclick="submitSection(7)">Evaluar este tema</button>
                </div>
            </div>

            <div class="section-results" id="results7"></div>

            <div class="final-summary" id="finalSummary">
                <div class="results-header">
                    <h2>🎉 Evaluación completa!</h2>
                    <div class="score-display" id="finalScore">0 / 128</div>
                    <p>Resultados</p>
                </div>
                <div id="finalCategoryBreakdown"></div>
                <div class="learning-path">
                    <h3>🎯 Tu roadmap personalizado de aprendizaje</h3>
                    <div id="finalRecommendations"></div>
                </div>
                <div class="final-cta">
                    <h3>💼 Conecta con Zaira</h3>
                    <p>¿Buscas mejorar como Product Manager de Pagos? Mandame un DM!</p>
                    <p style="margin-top: 15px;"><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/zaira-zatarain/es/" target="_blank">LinkedIn de Zaira Zatarain</a></p>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Hecho por <a href="https://www.linkedin.com/in/zaira-zatarain/es/" target="_blank">Zaira Zatarain</a></p>
            <p>¿Te gustaría conocer más sobre como mejorar tus habilidades como Product Manager en Pagos? Conectemos en LinkedIn</p>
            <p style="font-size: 0.8em; color: #999; margin-top: 10px;">Version 1.1 | Noviembre 2025</p>
        </div>
    </div>

    <script>
        // Question data with explanations
        const questionData = {
            1: {
                correct: 'B',
                explanation: 'El issuer es banco del usuario, el acquirer es banco del comercio',
                learningPoint: 'Ecosistema de pagos → Issuer / Acquirer / Gateway / Processor'
            },
            2: {
                correct: 'C',
                explanation: 'Solo el banco emisor decide si permite usar los fondos del titular, la red únicamente comunica la petición, el adquiriente procesa la transacción y la pasarela de pagos es la UX',
                learningPoint: 'Aprende el flujo: gateway → adquirente → network → issuer → network → adquirente → gateway → comercio.'
            },
            3: {
                correct: 'B',
                explanation: 'La pasarela es la “puerta de entrada” del pago online (UX)',
                learningPoint: 'Te sugiero enfocarte en comprender la diferencia de roles: gateway, processor, switch, orchestrator.'
            },
            4: {
                correct: 'C',
                explanation: 'Cuando se usa tokenización + cryptogram + biometría → Usualente issuer confía más y por ello mayor tasa de aprobación',
                learningPoint: 'Invierte tiempo en conocer los tipos de pago, especialmente lo asociado a cómo funcionan las wallets digitales'
            },
            5: {
                correct: 'C',
                explanation: 'El mayor “drop” ocurre después de la confirmación pero antes del resultado, lo que indica un problema en la etapa de autorización, típicamente en: el gateway enviando mal la transacción, el adquirente generando errores, o el emisor rechazando o no respondiendo.',
                learningPoint: 'Estudia el flujo END-TO-END del pago: Checkout → Ingreso tarjeta → Envío al gateway → Adquirente → Red de tarjetas → Emisor → Respuesta.'
            },
            6: {
                correct: 'A',
                explanation: 'Reintentos, expiración, tokenización y notificaciones son clave.',
                learningPoint: 'Aprende lifecycle de suscripciones: retries, dunning, pacing'
            },
            7: {
                correct: 'C',
                explanation: 'Dejarlo para después no es lo correcto, una habilidad que adquieres con conocimiento es saber que es un timeout y con esa información no es suficiente para cambiar de adquiriente',
                learningPoint: 'Repasar los conceptos técnicos para poder hablar el mismo idioma que los devs'
            },
            8: {
                correct: 'C',
                explanation: 'La decisión debe basarse en impacto, datos y tradeoffs, no en “querer muchas opciones”',
                learningPoint: 'Comunicación con claridad y traducción de necesidades de negocio ↔ impacto en producto'
            },
            9: {
                correct: 'D',
                explanation: 'Proveedores deben probar con evidencia. Sin logs, no hay forma de asignar responsabilidad',
                learningPoint: 'Vendor management = pedir pruebas, métricas, times de red, decline codes'
            },
            10: {
                correct: 'C',
                explanation: 'Siempre debe haber un espacio para cuestionar de manera amable con evidencias BINs, fechas, cohorts y tipo de transacción cambian completamente el auth rate',
                learningPoint: 'Practica el saber cuestionar datos con criterio técnico y metodológico'
            },
            11: {
                correct: 'Verdadero',
                explanation: 'Un PM es puente: cambias tu forma de comunicar según la audiencia',
                learningPoint: 'La comunicación contextual es una de las competencias más senior'
            },
            12: {
                correct: 'C',
                explanation: 'No puedes asumir: necesitas medir latencia, performance del gateway y tiempos de respuesta',
                learningPoint: 'Diagnóstico basado en datos antes de cualquier hipótesis'
            },
            13: {
                correct: 'A',
                explanation: 'Transacciones pequeñas, muchas, rápidas y por el mismo BIN son patrón típico de card testing',
                learningPoint: 'Aprende a reconocer señales tempranas de fraude automatizado'
            },
            14: {
                correct: 'B',
                explanation: 'Gran parte del friendly fraud ocurre porque el cliente “no reconoce el cargo',
                learningPoint: 'La claridad post-transacción previene disputas'
            },
            15: {
                correct: 'C',
                explanation: 'La AOC es el único documento oficial y auditable.',
                learningPoint: 'Todo PM debe saber validar cumplimiento PCI-DSS. Dependiendo de la localidad cambian los requerimientos.'
            },
            16: {
                correct: 'B',
                explanation: 'SCA exige al menos dos factores, especialmente para CNP',
                learningPoint: 'Pago seguro ≠ fricción; usa exenciones inteligentes'
            },
            17: {
                correct: 'B',
                explanation: 'Fondos temporales o disponibilidad del issuer → razones recuperables',
                learningPoint: 'Soft = reintentar. Hard = rechazar y pedir otro medio.'
            },
            18: {
                correct: 'Falso',
                explanation: 'Aplica también si procesas o transmites datos sensibles.',
                learningPoint: 'Entender el alcance de PCI-DSS'
            },
            19: {
                correct: 'B',
                explanation: 'Un marketplace evita manejar fondos mediante split payouts a cuentas validadas del vendedor',
                learningPoint: 'Identifica cuándo usar payout rails vs card rails..'
            },
            20: {
                correct: 'A',
                explanation: 'Tokenizar la tarjeta permite pagos recurrentes sin pedir datos cada vez',
                learningPoint: 'One-click = convertir más en compras repetidas'
            },
            21: {
                correct: 'Verdadero',
                explanation: 'No están ligados a una orden específica (mismo código para todo)',
                learningPoint: 'QR dinámico = conciliación automática. Estático = manual'
            },
            22: {
                correct: 'B',
                explanation: 'Cash-in = cargar dinero físico a una cuenta digital',
                learningPoint: 'Cash-in es clave en países con baja bancarización'
            },
            23: {
                correct: 'B',
                explanation: 'Cargos programados requieren tokenización + scheduling + retries',
                learningPoint: 'Los pagos programados deben considerar expiración, fallos y reintentos'
            },
            24: {
                correct: 'A',
                explanation: 'Redirecciones se perciben inseguras y aumentan abandono',
                learningPoint: 'Checkout nativo reduce fricción y mejora conversión.'
            },
            25: {
                correct: 'C',
                explanation: 'Los devs requieren claridad total sobre flujos, reglas y escenarios límite para construir sin ambigüedades.',
                learningPoint: 'La calidad del PRD = calidad del producto final..'
            },
            26: {
                correct: 'C',
                explanation: 'Seguridad debe equilibrarse con conversión.',
                learningPoint: 'El PM de pagos piensa seguridad con criterio, no “más datos”.'
            },
            27: {
                correct: 'Verdadero',
                explanation: 'UX reduce fricción → mayor conversión.',
                learningPoint: 'En pagos, conversión > estética, ya que puedes tener un diseño hermoso pero si es complicado pagar, se pierde la conversión.'
            },
            28: {
                correct: 'C',
                explanation: 'Lanzar a un % pequeño reduce riesgo y permite validar.',
                learningPoint: 'PMs deben dominar técnicas de progressive delivery.'
            },
            29: {
                correct: 'C',
                explanation: 'El MVP te permite validar demanda sin sobreconstruir.',
                learningPoint: 'Experimentar rápido > perfección inicial.'
            },
            30: {
                correct: 'B',
                explanation: 'Menos fricción = mayor auth rate y conversión',
                learningPoint: 'Checkout = optimización, no decoración.'
            },
            31: {
                correct: 'C',
                explanation: 'En tickets bajos (ej: $5 USD), un cargo fijo de $0.30 representa una proporción enorme.',
                learningPoint: 'El fixed fee es crítico para microtransacciones.'
            },
            32: {
                correct: 'C',
                explanation: 'Cada chargeback cuesta dinero: multa, costo operativo, reverso, riesgo reputacional.',
                learningPoint: 'El fraude y los chargebacks son costos directos, no “problemas de soporte”.'
            },
            33: {
                correct: 'B',
                explanation: 'Un MDR más alto puede justificarse si genera más ventas convertidas.',
                learningPoint: 'El auth rate tiene impacto directo en ingresos → más importante que el MDR puro.'
            },
            34: {
                correct: 'Verdadero',
                explanation: 'Menores costos por transacción y mayor aprobación.',
                learningPoint: 'Diversificar rails = mejor margen + mejor conversión'
            },
            35: {
                correct: 'B',
                explanation: 'Los payouts son operaciones financieras con fees asociados (SPEI, ACH, retiros, cuentas bancarias).',
                learningPoint: 'En marketplaces, los payouts son tan importantes como los pay-ins.'
            },
            36: {
                correct: 'B',
                explanation: 'Más soft declines = más costos operativos + ventas perdidas.',
                learningPoint: 'Retry logic bien diseñado = menos pérdida de ingresos.'
            },
            37: {
                correct: 'B',
                explanation: 'Educational errors don\'t just misinform—they create misconceptions that actively interfere with future learning. Students trust educational tools implicitly, making errors particularly harmful.',
                learningPoint: 'In educational contexts, accuracy requirements are higher because errors compound over time and damage learning outcomes.'
            },
            38: {
                correct: 'A',
                explanation: 'Learning requires spacing, scaffolding, and staying in the zone of proximal development. Netflix optimizes for engagement; adaptive learning must optimize for learning science principles.',
                learningPoint: 'Educational AI requires domain expertise in learning science, not just recommendation algorithms. Engagement ≠ learning.'
            },
            39: {
                correct: 'False',
                explanation: 'AI-generated problems can have subtle errors, may not target specific learning objectives, and lack the pedagogical design of expert-created problems. Quantity ≠ quality.',
                learningPoint: 'AI generation is a tool, not a replacement for pedagogical expertise. Human review and curation remain essential.'
            },
            40: {
                correct: 'B',
                explanation: 'Predictions can become self-fulfilling prophecies—teachers may give up on "at-risk" students or students may internalize low expectations. This creates harm beyond prediction inaccuracy.',
                learningPoint: 'Predictions in educational contexts can change outcomes. Design systems that support intervention without creating stigma or lowered expectations.'
            },
            41: {
                correct: 'B',
                explanation: 'This preserves the learning process while providing AI support. Students still develop writing skills through brainstorming and revision, but don\'t outsource final composition.',
                learningPoint: 'AI in education should augment learning processes, not replace them. Focus on developing skills, not just producing outputs.'
            },
            42: {
                correct: 'A',
                explanation: 'Knowledge gaps identify what learners need to progress. This enables targeted intervention rather than generic review. It\'s a core concept in adaptive learning.',
                learningPoint: 'Identifying knowledge gaps enables personalized learning paths. AI can analyze patterns to pinpoint specific areas needing attention.'
            },
            43: {
                correct: 'False',
                explanation: 'Practical application matters more than theoretical knowledge for workforce readiness. Assessments should measure ability to apply skills in realistic scenarios.',
                learningPoint: 'Workforce development AI should assess applied skills, not just knowledge recall. Real-world performance prediction requires practical evaluation.'
            },
            44: {
                correct: 'B',
                explanation: 'Learning content must be accurate, pedagogically sound, and appropriately leveled. Engagement matters but is secondary to learning effectiveness.',
                learningPoint: 'Educational content curation requires pedagogical validation, not just popularity or engagement metrics.'
            },
            45: {
                correct: 'B',
                explanation: 'Predictions affect learner psychology. Students ahead of predictions may coast; those behind may give up. This impacts motivation and agency, core drivers of learning success.',
                learningPoint: 'Transparency about AI predictions must be balanced against psychological impacts. Sometimes hiding predictions preserves motivation and agency.'
            }
        };

        const sectionData = {
            1: { name: 'Fundamentos', max: 13, questions: [1,2,3,4,5,6] },
            2: { name: 'Habilidades', max: 15, questions: [7,8,9,10,11,12] },
            3: { name: 'Riesgo, fraude y compliance', max: 11, questions: [13,14,15,16,17,18] },
            4: { name: 'Experiencia', max: 13, questions: [19,20,21,22,23,24] },
            5: { name: 'Producto', max: 13, questions: [25,26,27,28,29,30] },
            6: { name: 'Unit economics', max: 13, questions: [31,32,33,34,35,36] },
            //7: { name: 'Producto', max: 15, questions: [37,38,39,40,41,42,43,44,45] }
        };

        let completedSections = [];
        let sectionScores = {};
        let allQuestions = {};

        // Store all question text for display
        function initializeQuestions() {
            allQuestions = {
                1: "¿Cuál es la diferencia entre un issuer y un acquirer?",
                2: "¿Qué elemento del ecosistema es el responsable final de autorizar o rechazar una transacción?",
                3: "¿Cuál es la función principal de un payment gateway en un flujo online?",
                4: "¿Qué método de pago suele tener menor fricción y mayor aprobación por sus características de autentiación desde el dispositivo?",
                5: "Estás revisando el funnel de pagos de un e-commerce... Como PM, ¿cuál sería tu hipótesis principal sobre dónde está ocurriendo el mayor problema y por qué?",
                6: "¿Cuál es una característica crítica de los pagos recurrentes/suscripciones?",
                7: "El problema es el timeout del issuer”. ¿Qué debes responder como PM?",
                8: "Un stakeholder del área comercial pide agregar 10 métodos de pago nuevos. ¿Qué haces?",
                9: "Tu proveedor PSP asegura que “el problema no es de ellos”. ¿Cómo respondes profesionalmente?",
                10: "En un QBR, el adquirente presume 95% de aprobación. Tu data dice 85%. ¿Qué haces?",
                11: "Un PM fuerte adapta su lenguaje según el stakeholder: técnico para devs, business para finanzas, simple para comercios",
                12: "Un stakeholder reclama que “el checkout está lento”. ¿Cuál es la mejor primera acción?",
                13: "Ves un aumento abrupto en transacciones pequeñas y repetidas del mismo BIN. ¿Qué podría ser?",
                14: "¿Cuál es la mejor forma de reducir friendly fraud (fraude amistoso)?",
                15: "¿Qué documento debes pedir para validar que un proveedor cumple PCI-DSS?",
                16: "Un país aplica SCA (Strong Customer Authentication). ¿Qué implica para tu PM role?",
                17: "¿Cuál de los siguientes es un soft decline típico?",
                18: "PCI-DSS solo aplica si guardas números reales de tarjeta (PAN)",
                19: "Un marketplace quiere habilitar pagos entre compradores y vendedores sin tocar los fondos. ¿Qué caso de uso aplica?",
                20: "Una app de delivery tiene alto abandono cuando pide CVV cada vez. ¿Qué caso de uso resuelve esto?",
                21: "Los pagos QR estáticos siempre requieren conciliación manual",
                22: "Una fintech quiere permitir que usuarios agreguen saldo en Oxxo, tiendas y corresponsales. ¿Qué caso de uso es?",
                23: "Una app de viajes quiere cobrar automáticamente 48 horas antes de la salida del vuelo. ¿Qué caso de uso aplica?",
                24: "Usuarios de un e-commerce abandonan cuando el checkout redirige a otra página. ¿Qué caso de uso mejora esto?",
                25: "Estás definiendo un nuevo flujo de onboarding para comercios. ¿Qué entregable es imprescindible para ingeniería?",
                26: "Tu equipo quiere añadir campos extra en el formulario para “más seguridad”. ¿Qué haces?",
                27: "UX en pagos es más importante que diseño visual",
                28: "Ingeniería quiere lanzar una versión interna primero. ¿Qué metodología estás aplicando?",
                29: "Necesitas lanzar un BNPL rápido para competir. ¿Cuál es el enfoque correcto?",
                30: "Estás rediseñando un checkout. ¿Cuál es la prioridad principal?",
                31: "Si un comercio procesa pagos con un MDR del 2.9% + $0.30 USD, ¿qué afecta más la rentabilidad en tickets pequeños?",
                32: "¿Qué pasa con los unit economics cuando sube la tasa de contracargos?",
                33: "Un PSP ofrece un MDR más alto, pero duplica el auth rate. ¿Qué pasa con tus unit economics?",
                34: "Los métodos alternativos como wallets o transferencias suelen mejorar los unit economics",
                35: "¿Por qué un marketplace debe considerar costos de payouts en sus unit economics?",
                36: "¿Qué impacto tiene una alta tasa de soft declines en tus unit economics?",
                37: "AI tutor tells student '2+2=5' when asked for help with basic math. Why is this MORE serious than same error in general chatbot?",
                38: "What distinguishes adaptive learning from content recommendations (like Netflix)?",
                39: "AI-generated practice problems are always superior to human-created ones because AI produces infinite variations.",
                40: "Using AI to predict student dropout risk—what's the PRIMARY ethical concern?",
                41: "AI writing assistant helps students draft essays. Teachers say students are 'cheating.' What's the MOST constructive product response?",
                42: "In learning analytics, what's a 'knowledge gap'?",
                43: "In workforce development, AI skills assessments should only measure technical knowledge, not practical application.",
                44: "Building AI to curate learning content—what's TOP priority for quality control?",
                45: "AI predicts learner will master skill in 2 weeks. Learner sees this prediction. What's your PRIMARY concern?"
            };
        }

        function showSectionMenu() {
            document.getElementById('instructions').style.display = 'none';
            document.getElementById('content').style.display = 'none';
            document.getElementById('sectionMenu').style.display = 'block';

            renderSectionMenu();
        }

        function renderSectionMenu() {
            let html = '';

            // Build section list first
            let sectionsHTML = '';
            for (let sectionNum in sectionData) {
                const section = sectionData[sectionNum];
                const isCompleted = completedSections.includes(parseInt(sectionNum));
                const score = sectionScores[sectionNum] || 0;

                sectionsHTML += `
                    <div class="section-menu-item ${isCompleted ? 'completado' : ''}" onclick="navigateToSection(${sectionNum})">
                        <div>
                            <h3 style="margin-bottom: 5px;">Tema ${sectionNum}: ${section.name}</h3>
                            <p style="color: #666; font-size: 0.9em;">${section.questions.length} preguntas · ${section.max} puntos</p>
                        </div>
                        <div>
                            ${isCompleted ?
                                `<span class="section-status completed">✓ Completado (${score}/${section.max})</span>` :
                                `<span class="section-status pending">Sin iniciar</span>`
                            }
                        </div>
                    </div>
                `;
            }

            html += sectionsHTML;

            /* EMAIL COLLECTION - TEMPORARILY HIDDEN
            // Add email collection form (always visible, but message changes based on completion)
            const hasCompletedSections = completedSections.length > 0;
            html += `
                <div style="background: #f0f4ff; border: 2px solid #667eea; border-radius: 8px; padding: 20px; margin-top: 20px;">
                    <h3 style="color: #667eea; margin-bottom: 10px;">📧 Send me my results!</h3>
                    <p style="margin-bottom: 15px; font-size: 0.95em;">
                        ${hasCompletedSections ?
                            'Get your personalized learning path delivered to your inbox.' :
                            'Complete sections and get your personalized learning path emailed to you.'}
                    </p>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <input type="email" id="userEmail" placeholder="your.email@example.com"
                               style="flex: 1; min-width: 200px; padding: 12px; border: 2px solid #667eea; border-radius: 6px; font-size: 1em;">
                        <button class="btn" onclick="sendResultsEmail()" style="white-space: nowrap;"
                                ${!hasCompletedSections ? 'disabled' : ''}>
                            Send Results
                        </button>
                    </div>
                    <div id="emailStatus" style="margin-top: 10px; font-size: 0.9em;"></div>
                </div>
            `;
            */

            // Add final summary button if all sections complete
            const allComplete = Object.keys(sectionData).every(s => completedSections.includes(parseInt(s)));
            if (allComplete) {
                html += `
                    <div class="button-container" style="margin-top: 30px;">
                        <button class="btn" onclick="showFinalSummary()">View Final Summary →</button>
                    </div>
                `;
            }

            document.getElementById('sectionMenuList').innerHTML = html;
        }

        function startAssessment() {
            initializeQuestions();
            showSectionMenu();
        }

        function navigateToSection(sectionNum) {
            initializeQuestions();
            document.getElementById('instructions').style.display = 'none';
            document.getElementById('sectionMenu').style.display = 'none';
            document.getElementById('content').style.display = 'block';

            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.section-results').forEach(r => r.classList.remove('show'));
            document.getElementById(`section${sectionNum}`).classList.add('active');

            // Show results if section was already completed
            if (completedSections.includes(sectionNum)) {
                document.getElementById(`results${sectionNum}`).classList.add('show');
            }

            updateProgress();
        }

        function updateProgress() {
            const currentSection = document.querySelector('.section.active');
            if (!currentSection) return;

            const sectionNum = parseInt(currentSection.id.replace('section', ''));
            const totalSections = Object.keys(sectionData).length;
            const percentage = Math.round((completedSections.length / totalSections) * 100);

            document.getElementById('progressText').textContent = `Sección ${sectionNum} de ${totalSections}`;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressBar').textContent = percentage + '%';
        }

        function submitSection(sectionNum) {
            const questions = sectionData[sectionNum].questions;
            let score = 0;
            let answered = 0;
            const results = [];

            // Calculate score and collect results
            questions.forEach(qNum => {
                const selected = document.querySelector(`input[name="q${qNum}"]:checked`);
                if (selected) {
                    answered++;
                    const points = parseInt(selected.value);
                    score += points;

                    const isCorrect = points > 0;
                    const selectedLabel = selected.parentElement.querySelector('label').textContent.trim();

                    // Find correct answer text
                    const correctAnswerLetter = questionData[qNum].correct;
                    let correctAnswerText = '';
                    let maxPoints = 0;

                    // Find the correct option and its point value
                    document.querySelectorAll(`input[name="q${qNum}"]`).forEach(input => {
                        const label = input.parentElement.querySelector('label').textContent.trim();
                        const optionLetter = label.substring(0, 1);
                        const optionPoints = parseInt(input.value);

                        if (optionPoints > maxPoints) maxPoints = optionPoints;
                        if (optionLetter === correctAnswerLetter) {
                            correctAnswerText = label;
                        }
                    });

                    results.push({
                        number: qNum,
                        isCorrect: isCorrect,
                        userAnswer: selectedLabel,
                        correctAnswer: correctAnswerLetter,
                        correctAnswerText: correctAnswerText,
                        explanation: questionData[qNum].explanation,
                        learningPoint: questionData[qNum].learningPoint,
                        pointsEarned: points,
                        maxPoints: maxPoints
                    });
                }
            });

            if (answered < questions.length) {
                alert(`Please answer all ${questions.length} questions before submitting.`);
                return;
            }

            // Store score
            sectionScores[sectionNum] = score;
            const wasNewSection = !completedSections.includes(sectionNum);
            if (wasNewSection) {
                completedSections.push(sectionNum);
                // incrementStat('sectionsCompleted'); // DISABLED
            }

            // Display results
            displaySectionResults(sectionNum, score, results);

            // Hide current section, show results
            document.getElementById(`section${sectionNum}`).classList.remove('active');
            document.getElementById(`results${sectionNum}`).classList.add('show');

            // Scroll to results
            document.getElementById(`results${sectionNum}`).scrollIntoView({ behavior: 'smooth' });
        }

        function displaySectionResults(sectionNum, score, results) {
            const maxScore = sectionData[sectionNum].max;
            const percentage = Math.round((score / maxScore) * 100);
            const section = sectionData[sectionNum];

            let performance = '';
            let performanceColor = '';
            if (percentage >= 80) {
                performance = 'Excelente! conocimientos buenos del tema.';
                performanceColor = '#28a745';
            } else if (percentage >= 60) {
                performance = 'Tienes algunos fundamentos con oportunidad de aprender.';
                performanceColor = '#ffc107';
            } else {
                performance = 'Prioriza este tema en tu aprendizaje.';
                performanceColor = '#dc3545';
            }

            let html = `
                <div class="results-header">
                    <h2>Tema ${sectionNum} Resultados: ${section.name}</h2>
                    <div class="score-display">${score} / ${maxScore}</div>
                    <p style="color: ${performanceColor}; font-weight: 600;">${performance} (${percentage}%)</p>
                </div>

                <div class="answer-review">
                    <h3>Resultados</h3>
            `;

            results.forEach(r => {
                const questionText = allQuestions[r.number];
                html += `
                    <div class="answer-item ${r.isCorrect ? 'correct' : 'incorrect'}">
                        <h4>Pregunta ${r.number} ${r.isCorrect ? '✓ Correcto' : '✗ Incorrecta'} (${r.pointsEarned}/${r.maxPoints} pts)</h4>

                        <div class="question-display">
                            <strong>Pregunta:</strong> ${questionText}
                        </div>

                        <div class="answer-display ${r.isCorrect ? 'correct-choice' : 'incorrect-choice'}">
                            <strong>Tu respuesta:</strong> ${r.userAnswer}
                        </div>

                        ${!r.isCorrect ? `
                            <div class="answer-display correct-choice">
                                <strong>Respuesta correcta:</strong> ${r.correctAnswerText}
                            </div>
                        ` : ''}

                        <div class="explanation">
                            <strong>Why:</strong> ${r.explanation}
                            <br><br>
                            <strong>Key Takeaway:</strong> ${r.learningPoint}
                        </div>
                    </div>
                `;
            });

            html += `</div>`;

            // Add personalized learning path
            html += generateSectionLearningPath(sectionNum, percentage);

            // Add navigation
            const remainingSections = Object.keys(sectionData).filter(s => !completedSections.includes(parseInt(s)));
            const allComplete = remainingSections.length === 0;

            html += `
                <div class="button-container">
                    <button class="btn btn-secondary" onclick="navigateToSection(${sectionNum})">Revisar preguntas</button>
                    ${!allComplete ?
                        `<button class="btn" onclick="showSectionMenu()">Elegir siguiente tema (${remainingSections.length} pendientes) →</button>` :
                        `<button class="btn" onclick="showFinalSummary()">Ver resumen final →</button>`
                    }
                </div>
            `;

            document.getElementById(`results${sectionNum}`).innerHTML = html;
            updateProgress();
        }

        function generateSectionLearningPath(sectionNum, percentage) {
            const paths = {
                1: {
                    weak: [
                      'Leer "Payments 101 by Stripe” – entiende el ecosistema completo de pagos con tarjeta',
                      'Leer: Billetera Dev Documentation en Apple - explica a nivel técnico como funcionan las wallets',
                      'Practica: Simula un flujo de pago end-to-end',
                      'Estudia: Tipos de métodos de pago (tarjetas, transferencias, wallets, BNPL)',
                      'Ejercicio: Compara 3 checkouts diferentes, revisa (en móvil y desktop): Mercado Pago, Shopify o PayPal'
                    ],
                    strong: [
                      'Deepen expertise: Analiza flujos avanzados del ecosistema de pagos (multi-acquirer routing)',
                      'Crea: Diseña un mapa end-to-end de un flujo de pago real. Crea (aunque sea en Figma o Miro) un flujo completo',
                      'Comparte: Documenta un análisis comparando 3 métodos de pago. Escribe un mini-ensayo explicando cuándo usar: tarjeta, wallet y transferencia'

                    ]
                },
                2: {
                    weak: [
                        'Estudia: Lee casos reales de comunicación fallida en equipos de producto y pagos (postmortems, incident reports)',
                        'Practica: Toma 5 requerimientos y tradúcelos en lenguaje técnico para devs y en lenguaje de negocio para stakeholders.',
                        'Aprende: Practica cómo pedir logs, evidencias y decline codes a PSPs sin perder claridad ni profundidad.',
                        'Metodología: Crea tu propia “Guía de Comunicación PM”: cómo explicar problemas, pedir datos y dar contexto.'
                    ],
                    strong: [
                        'Avanazdo: Estudia frameworks de comunicación avanzada (Shape Up, RFC writing, Tech Specs).',
                        'Construye: Diseña un ritual de technical deep-dives mensual para mejorar la comunicación con devs y proveedores.',
                        'Lidera: Mentorea a otros PMs en cómo traducir problemas técnicos en decisiones de negocio.'
                    ]
                },
                3: {
                    weak: [
                      'Estudia: Lee casos de fraude (card testing, friendly fraud, phishing) y cómo se resolvieron en empresas reales.',
                      'Practica: Analiza 10 transacciones ficticias e identifica: fuente del decline, riesgo, tipo de fraude.',
                      'Aprende: Entiende soft/hard declines, chargebacks, risk scoring y PCI-DSS con ejemplos reales.',
                      'Metodología: Crea un “Árbol de decisiones de riesgo”: cuándo activar 3DS, cuándo hacer retry, cuándo bloquear.',
                    ],
                    strong: [
                      'Advanced: Estudia modelos híbridos de fraude (reglas + machine learning) y señales avanzadas (device, geolocalización).',
                      'Build: Diseña un sandbox de fraude donde definas “simulaciones” de ataques y cómo respondería el sistema.',
                      'Lead: Lidera sesiones con riesgo/compliance para alinear seguridad ↔ conversión.'
                    ]
                },
                4: {
                    weak: [
                      'Estudia: Lee case studies de UX en pagos: checkout nativo vs redireccionado, BNPL, wallets, QR, cash-in/out.',
                      'Practica: Analiza 5 checkouts reales e identifica fricción, campos innecesarios y puntos de falla comunes.',
                      'Aprende: Aprende cómo fluyen pagos en mobile, POS, QR dinámico y sus implicaciones de UX.',
                      'Metodología: Diseña tu propio “Decision Tree de Casos de Uso”: cuándo usar tarjeta, SPEI, wallet o QR.'
                    ],
                    strong: [
                      'Avanzado: Estudia patrones de conversión global: India UPI, PIX Brasil, Taps, Pay-by-Bank.',
                      'Construye: Rediseña un checkout completo con flujos alternativos y experimentos A/B.',
                      'Lidera: Asesora a otros PMs sobre cómo elegir el método de pago correcto para cada industria o país.'
                    ]
                },
                5: {
                    weak: [
                      'Estudia: Lee PRDs reales de productos de pagos (Stripe, Adyen, PayPal).',
                      'Estudia: El ciclo de vida de producto',
                      'Practica: Redacta un PRD con criterios de aceptación, ejemplos, payloads y casos edge.',
                      'Aprende: Domina progressive rollout, feature flags, versioning de APIs y testing en pagos.',
                      'Metodología: Crea tu propio “Product Development Checklist” para lanzamientos de pagos.'
                    ],
                    strong: [
                      'Avanzado: Estudia prácticas avanzadas de release (progressive delivery, canary tests, shadow traffic).',
                      'Construye: Diseña un pipeline de lanzamiento end-to-end para un feature complejo (tokenización, 3DS, routing).',
                      'Lidera: Guía a otros PMs en cómo minimizar riesgo en lanzamientos de alto impacto.'
                    ]
                },
                6: {
                    weak: [
                        'Estudia: Lee casos reales de pricing y márgenes en PSPs y marketplaces.',
                        'Practica: Calcula unit economics de 5 escenarios: microtransacciones, BNPL, cross-border, tarjetas, SPEI.',
                        'Aprende: Entiende cómo MDR, interchange, fixed fee, auth rate y chargebacks afectan margen.',
                        'Metodología: Construye tu propio modelo de “Unit Economics para Pagos” en una hoja de cálculo.'
                    ],
                    strong: [
                        'Avanzado: Estudia pricing avanzado: interchange++ , blended pricing, risk-based pricing, dual acquiring.',
                        'Construye: Diseña un modelo financiero completo con escenarios: churn, retries, LTV, fraude, fallback.',
                        'Lidera: Enseña a tu equipo a tomar decisiones basadas en impacto económico y no solo en features'
                    ]
                },
                7: {
                    weak: [
                        'Study: Read learning science fundamentals (spacing, scaffolding, ZPD)',
                        'Research: Analyze how successful EdTech products apply AI (Duolingo, Khan Academy)',
                        'Practice: Identify pedagogical concerns in 3 AI educational tools',
                        'Framework: Create guidelines for when AI helps vs hurts learning'
                    ],
                    strong: [
                        'Advanced: Design an adaptive learning algorithm incorporating learning science',
                        'Research: Study bias and equity implications in AI-powered education',
                        'Lead: Develop principles for responsible AI in learning products'
                    ]
                }
            };

            const recommendations = percentage >= 70 ? paths[sectionNum].strong : paths[sectionNum].weak;

            let html = `
                <div class="learning-path">
                    <h3>📚 Mi sugerencia de aprendizaje en ${sectionData[sectionNum].name}</h3>
                    <ul>
            `;

            recommendations.forEach(rec => {
                html += `<li>${rec}</li>`;
            });

            html += `
                    </ul>
                </div>
            `;

            return html;
        }

        function showFinalSummary() {
            // Calculate total score
            let totalScore = 0;
            let maxScore = 0;
            for (let section in sectionScores) {
                totalScore += sectionScores[section];
                maxScore += sectionData[section].max;
            }

            const percentage = Math.round((totalScore / maxScore) * 100);

            // Determine level
            let level = '';
            let interpretation = '';
            if (percentage >= 100) {
                level = 'Experto como PM de Pagos';
                interpretation = 'Tienes dominio completo de los fundamentos, casos de uso y criterios clave de decisiones en pagos. Tu siguiente etapa es profundizar y liderar.';
            } else if (percentage >= 76) {
                level = 'Growing como PM de Pagos';
                interpretation = 'Tienes bases sólidas y entiendes el ecosistema, pero aún te falta consistencia en partes clave (fraude, unit economics o comunicación técnica';
              } else if (percentage >= 51) {
                  level = 'Desarrollándote como PM de Pagos';
                  interpretation = 'Tu nivel actual está en construcción. Conoces algunos conceptos, pero necesitas reforzar bases esenciales antes de avanzar';
            } else {
                level = 'Early-Stage como PM de pagos';
                interpretation = 'Estas aprendiendo los fundamentos. Enfocate en los básicos y entender conceptos.';
            }

            document.getElementById('finalScore').textContent = `${totalScore} / ${maxScore}`;

            // Category breakdown
            let breakdownHTML = '<h3>Section Breakdown</h3>';
            for (let section in sectionScores) {
                const score = sectionScores[section];
                const max = sectionData[section].max;
                const pct = Math.round((score / max) * 100);

                breakdownHTML += `
                    <div class="category-score-card">
                        <div>
                            <strong>${sectionData[section].name}</strong><br>
                            <small>${score}/${max} points</small>
                        </div>
                        <div class="score-badge">${pct}%</div>
                    </div>
                `;
            }

            document.getElementById('finalCategoryBreakdown').innerHTML = breakdownHTML;

            // Final recommendations
            let recHTML = `
                <h4>${level} (${percentage}%)</h4>
                <p>${interpretation}</p>
                <br>
                <h4>Siguientes pasos:</h4>
                <ul>
                    <li>Revisa las secciones donde obtuviste 60% o menos- estas son las áreas donde debes enfocarte</li>
                    <li>Construye / analiza 2-3 proyectos que demuestren tus áreas más fuertes</li>
                    <li>Retoma esta evaluación cada cierto tiempo para que evalues tu progreso</li>
                </ul>
            `;

            document.getElementById('finalRecommendations').innerHTML = recHTML;

            // Hide all sections, show final summary
            document.querySelectorAll('.section, .section-results').forEach(el => {
                el.classList.remove('active');
                el.classList.remove('show');
            });

            document.getElementById('finalSummary').classList.add('show');
            document.getElementById('finalSummary').scrollIntoView({ behavior: 'smooth' });

            // Track assessment completion
            // incrementStat('assessmentsCompleted'); // DISABLED
        }

        // Email sending function
        async function sendResultsEmail() {
            const email = document.getElementById('userEmail').value;
            const statusEl = document.getElementById('emailStatus');

            // Check if any sections completed
            if (completedSections.length === 0) {
                statusEl.innerHTML = '<span style="color: #dc3545;">❌ Please complete at least one section first</span>';
                return;
            }

            if (!email || !email.includes('@')) {
                statusEl.innerHTML = '<span style="color: #dc3545;">❌ Please enter a valid email address</span>';
                return;
            }

            statusEl.innerHTML = '<span style="color: #667eea;">⏳ Sending...</span>';

            // Compile results data
            const resultsData = {
                email: email,
                timestamp: new Date().toISOString(),
                totalScore: Object.values(sectionScores).reduce((a, b) => a + b, 0),
                maxScore: Object.values(sectionData).reduce((sum, sec) => sum + sec.max, 0),
                sectionScores: sectionScores,
                completedSections: completedSections.length,
                totalSections: Object.keys(sectionData).length,
                sectionDetails: {}
            };

            // Add section breakdowns with learning paths
            const learningPaths = {
                1: {
                    weak: [
                        'Leer "Payments 101 by Stripe” – entiende el ecosistema completo de pagos con tarjeta',
                        'Leer (para México): ¿Qué es y cómo funciona el SPEI? - entiende el mundo de transferencias',
                        'Leer: Billetera Dev Documentation en Apple - explica a nivel técnico como funcionan las wallets',
                        'Practica: Simula un flujo de pago end-to-end',
                        'Estudia: Tipos de métodos de pago (tarjetas, transferencias, wallets, BNPL)',
                        'Estudia: Decline Codes y Soft vs Hard Declines',
                        'Ejercicio: Compara 3 checkouts diferentes, revisa (en móvil y desktop): Mercado Pago, Shopify o PayPal'
                    ],
                    strong: [
                        'Deepen expertise: Analiza flujos avanzados del ecosistema de pagos (multi-acquirer routing)',
                        'Crea: Diseña un mapa end-to-end de un flujo de pago real. Crea (aunque sea en Figma o Miro) un flujo completo',
                        'Comparte: Documenta un análisis comparando 3 métodos de pago. Escribe un mini-ensayo explicando cuándo usar: tarjeta, wallet y transferencia'
                    ]
                },
                2: {
                  weak: [
                      'Estudia: Lee casos reales de comunicación fallida en equipos de producto y pagos (postmortems, incident reports)',
                      'Practica: Toma 5 requerimientos y tradúcelos en lenguaje técnico para devs y en lenguaje de negocio para stakeholders.',
                      'Aprende: Practica cómo pedir logs, evidencias y decline codes a PSPs sin perder claridad ni profundidad.',
                      'Metodología: Crea tu propia “Guía de Comunicación PM”: cómo explicar problemas, pedir datos y dar contexto.'
                  ],
                  strong: [
                      'Avanazdo: Estudia frameworks de comunicación avanzada (Shape Up, RFC writing, Tech Specs).',
                      'Construye: Diseña un ritual de technical deep-dives mensual para mejorar la comunicación con devs y proveedores.',
                      'Lidera: Mentorea a otros PMs en cómo traducir problemas técnicos en decisiones de negocio.'
                  ]
                },
                3: {
                  weak: [
                    'Estudia: Lee casos de fraude (card testing, friendly fraud, phishing) y cómo se resolvieron en empresas reales.',
                    'Practica: Analiza 10 transacciones ficticias e identifica: fuente del decline, riesgo, tipo de fraude.',
                    'Aprende: Entiende soft/hard declines, chargebacks, risk scoring y PCI-DSS con ejemplos reales.',
                    'Metodología: Crea un “Árbol de decisiones de riesgo”: cuándo activar 3DS, cuándo hacer retry, cuándo bloquear.',
                  ],
                  strong: [
                    'Advanced: Estudia modelos híbridos de fraude (reglas + machine learning) y señales avanzadas (device, geolocalización).',
                    'Build: Diseña un sandbox de fraude donde definas “simulaciones” de ataques y cómo respondería el sistema.',
                    'Lead: Lidera sesiones con riesgo/compliance para alinear seguridad ↔ conversión.'
                  ]
                },
                4: {
                  weak: [
                    'Estudia: Lee case studies de UX en pagos: checkout nativo vs redireccionado, BNPL, wallets, QR, cash-in/out.',
                    'Practica: Analiza 5 checkouts reales e identifica fricción, campos innecesarios y puntos de falla comunes.',
                    'Aprende: Aprende cómo fluyen pagos en mobile, POS, QR dinámico y sus implicaciones de UX.',
                    'Metodología: Diseña tu propio “Decision Tree de Casos de Uso”: cuándo usar tarjeta, SPEI, wallet o QR.'
                  ],
                  strong: [
                    'Avanzado: Estudia patrones de conversión global: India UPI, PIX Brasil, Taps, Pay-by-Bank.',
                    'Construye: Rediseña un checkout completo con flujos alternativos y experimentos A/B.',
                    'Lidera: Asesora a otros PMs sobre cómo elegir el método de pago correcto para cada industria o país.'
                  ]
                },
                5: {
                  weak: [
                    'Estudia: Lee PRDs reales de productos de pagos (Stripe, Adyen, PayPal).',
                    'Estudia: El ciclo de vida de producto',
                    'Practica: Redacta un PRD con criterios de aceptación, ejemplos, payloads y casos edge.',
                    'Aprende: Domina progressive rollout, feature flags, versioning de APIs y testing en pagos.',
                    'Metodología: Crea tu propio “Product Development Checklist” para lanzamientos de pagos.'
                  ],
                  strong: [
                    'Avanzado: Estudia prácticas avanzadas de release (progressive delivery, canary tests, shadow traffic).',
                    'Construye: Diseña un pipeline de lanzamiento end-to-end para un feature complejo (tokenización, 3DS, routing).',
                    'Lidera: Guía a otros PMs en cómo minimizar riesgo en lanzamientos de alto impacto.'
                  ]
                },
                6: {
                  weak: [
                      'Estudia: Lee casos reales de pricing y márgenes en PSPs y marketplaces.',
                      'Practica: Calcula unit economics de 5 escenarios: microtransacciones, BNPL, cross-border, tarjetas, SPEI.',
                      'Aprende: Entiende cómo MDR, interchange, fixed fee, auth rate y chargebacks afectan margen.',
                      'Metodología: Construye tu propio modelo de “Unit Economics para Pagos” en una hoja de cálculo.'
                  ],
                  strong: [
                      'Avanzado: Estudia pricing avanzado: interchange++ , blended pricing, risk-based pricing, dual acquiring.',
                      'Construye: Diseña un modelo financiero completo con escenarios: churn, retries, LTV, fraude, fallback.',
                      'Lidera: Enseña a tu equipo a tomar decisiones basadas en impacto económico y no solo en features'
                  ]
                },
                7: {
                    weak: [
                        'Study: Read learning science fundamentals (spacing, scaffolding, ZPD)',
                        'Research: Analyze how successful EdTech products apply AI (Duolingo, Khan Academy)',
                        'Practice: Identify pedagogical concerns in 3 AI educational tools',
                        'Framework: Create guidelines for when AI helps vs hurts learning'
                    ],
                    strong: [
                        'Advanced: Design an adaptive learning algorithm incorporating learning science',
                        'Research: Study bias and equity implications in AI-powered education',
                        'Lead: Develop principles for responsible AI in learning products'
                    ]
                }
            };

            for (let sectionNum in sectionScores) {
                const section = sectionData[sectionNum];
                const sectionScore = sectionScores[sectionNum];
                const sectionMax = section.max;
                const percentage = Math.round((sectionScore / sectionMax) * 100);

                // Determine which learning path to use
                const pathType = percentage >= 70 ? 'strong' : 'weak';
                const learningPath = learningPaths[sectionNum] ? learningPaths[sectionNum][pathType] : [];

                resultsData.sectionDetails[`Section ${sectionNum}`] = {
                    name: section.name,
                    score: sectionScore,
                    max: sectionMax,
                    percentage: percentage,
                    performance: percentage >= 70 ? 'Strong' : 'Needs Development',
                    learningPath: learningPath
                };
            }

            // Calculate level
            const percentage = Math.round((resultsData.totalScore / resultsData.maxScore) * 100);
            if (percentage >= 76) {
                resultsData.level = 'Proficient AI PM';
            } else if (percentage >= 51) {
                resultsData.level = 'Developing AI PM';
            } else {
                resultsData.level = 'Early-Stage AI PM';
            }

            try {
                // Use no-cors mode to bypass CORS restrictions
                const response = await fetch('https://hook.us2.make.com/l3qiduskkmptas82yzc2kd9t63zql8a0', {
                    method: 'POST',
                    mode: 'no-cors', // This bypasses CORS but we can't read response
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(resultsData)
                });

                // With no-cors, response is always opaque, so we assume success if no error
                statusEl.innerHTML = '<span style="color: #28a745;">✅ Results sent! Check Make.com to confirm delivery.</span>';
                document.getElementById('userEmail').value = '';

            } catch (error) {
                console.error('Error sending results:', error);

                // Provide more specific error message with fallback option
                if (error.message.includes('Failed to fetch')) {
                    // Create mailto link as fallback
                    const subject = encodeURIComponent('AI PM Assessment Results Request');
                    const body = encodeURIComponent(`Please send my results to this email address.\n\nCompleted Sections: ${completedSections.length}\nTotal Score: ${resultsData.totalScore}/${resultsData.maxScore}`);

                    statusEl.innerHTML = `
                        <span style="color: #dc3545;">❌ Direct submission blocked by browser.</span><br>
                        <a href="mailto:lisa@example.com?subject=${subject}&body=${body}"
                           style="color: #667eea; text-decoration: underline;">
                           Click here to email your results request instead
                        </a>
                        <br><small style="color: #666;">Or try opening this page in a new tab</small>
                    `;
                } else {
                    statusEl.innerHTML = '<span style="color: #dc3545;">❌ Network error: ' + error.message + '</span>';
                }
            }
        }

        /* STATS TRACKING - TEMPORARILY DISABLED
        // Stats tracking functions
        function initializeStats() {
            // Get or initialize stats from localStorage
            if (!localStorage.getItem('assessmentStats')) {
                localStorage.setItem('assessmentStats', JSON.stringify({
                    visitors: 0,
                    sectionsCompleted: 0,
                    assessmentsCompleted: 0
                }));
            }

            // Track unique visitor
            if (!sessionStorage.getItem('visitCounted')) {
                incrementStat('visitors');
                sessionStorage.setItem('visitCounted', 'true');
            }

            updateStatsDisplay();
        }

        function incrementStat(statName) {
            const stats = JSON.parse(localStorage.getItem('assessmentStats'));
            stats[statName]++;
            localStorage.setItem('assessmentStats', JSON.stringify(stats));
            updateStatsDisplay();
        }

        function updateStatsDisplay() {
            const stats = JSON.parse(localStorage.getItem('assessmentStats'));
            document.getElementById('visitorCount').textContent = stats.visitors || 0;
            document.getElementById('sectionsCompletedCount').textContent = stats.sectionsCompleted || 0;
            document.getElementById('assessmentsCompletedCount').textContent = stats.assessmentsCompleted || 0;
        }

        // Initialize on load
        window.addEventListener('load', initializeStats);
        */
    </script>
</body>
</html>
